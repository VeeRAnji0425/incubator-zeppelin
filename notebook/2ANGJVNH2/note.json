{
  "paragraphs": [
    {
      "text": "%md\n\nSpark-Cassandra-Solr combo\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n\u003eWarning: to use this demo, you\u0027ll need to have **Datastax Enterprise 4.7.0**",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "editorHide": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1432136878086_787836253",
      "id": "20150520-174758_534900824",
      "result": {
        "code": "SUCCESS",
        "type": "HTML",
        "msg": "\u003ch1\u003eSpark-Cassandra-Solr combo\u003c/h1\u003e\n\u003cblockquote\u003e\u003cp\u003eWarning: to use this demo, you\u0027ll need to have \u003cstrong\u003eDatastax Enterprise 4.7.0\u003c/strong\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n"
      },
      "dateCreated": "May 20, 2015 5:47:58 PM",
      "dateStarted": "May 24, 2015 8:59:22 PM",
      "dateFinished": "May 24, 2015 8:59:22 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Prepare data",
      "text": "import org.apache.spark.{SparkConf, SparkContext}\nimport com.datastax.spark.connector._\nimport org.apache.spark.rdd.RDD\nimport org.apache.spark.sql.SchemaRDD\nimport org.apache.spark.sql.cassandra.CassandraSQLContext\nimport scala.collection.JavaConversions._\n\nval cc \u003d new CassandraSQLContext(sc)\n\nvar musicStyles:List[(String,String)] \u003d Nil \nvar countries:List[(String,String)] \u003d Nil \n\nCassandraConnector(sc.getConf).withSessionDo { \n    session \u003d\u003e {\n        musicStyles \u003d session.execute(\"SELECT style FROM spark_demo.performers_distribution_by_style\").\n            all().\n            toList.\n            map(row \u003d\u003e row.getString(\"style\")).\n            toSet.\n            toList.\n            sorted.\n            map(style \u003d\u003e (style,style))\n            \n        countries \u003d session.execute(\"SELECT DISTINCT name FROM spark_demo.countries\").\n            all().\n            toList.\n            map(row \u003d\u003e row.getString(\"name\")).\n            toSet.\n            toList.\n            sorted.\n            map(country \u003d\u003e (country,country))    \n    }\n}\n",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "tableHide": true,
        "title": true,
        "editorHide": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1432483305349_2122532186",
      "id": "20150524-180145_111739812",
      "result": {
        "code": "SUCCESS",
        "type": "TEXT",
        "msg": "import org.apache.spark.{SparkConf, SparkContext}\nimport com.datastax.spark.connector._\nimport org.apache.spark.rdd.RDD\nimport org.apache.spark.sql.SchemaRDD\nimport org.apache.spark.sql.cassandra.CassandraSQLContext\nimport scala.collection.JavaConversions._\ncc: org.apache.spark.sql.cassandra.CassandraSQLContext \u003d org.apache.spark.sql.cassandra.CassandraSQLContext@7a191ab1\nmusicStyles: List[(String, String)] \u003d List()\ncountries: List[(String, String)] \u003d List()\n"
      },
      "dateCreated": "May 24, 2015 6:01:45 PM",
      "dateStarted": "Jun 2, 2015 10:09:07 PM",
      "dateFinished": "Jun 2, 2015 10:09:11 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "restrict with solr then aggregate with spark",
      "text": "//List all albums release of American artists having style Rock after 2010\ncc.cassandraSql(s\"\"\"\n    SELECT a.year,a.performer,a.title\n    FROM spark_demo.albums a\n    JOIN spark_demo.performers p\n    ON a.performer \u003d p.name\n    WHERE a.solr_query\u003d\u0027year:${z.input(\"Album Year\",\"[2010 TO *]\")}\u0027 \n    AND p.solr_query\u003d\u0027country:\"${z.select(\"Artist Country\",\"USA\",countries)}\" AND styles:*${z.select(\"Artist Style\",\"Rock\",musicStyles)}*\u0027\n\"\"\".stripMargin).\nmap(row \u003d\u003e (row.getInt(0),row.getString(1),row.getString(2))).\nsortBy(tuple \u003d\u003e (tuple._1,tuple._2,tuple._3)).\ndisplayAsTable(\"Year\",\"Performer\",\"Title\")",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [
            {
              "name": "Year",
              "index": 0.0,
              "aggr": "sum"
            }
          ],
          "values": [
            {
              "name": "Performer",
              "index": 1.0,
              "aggr": "sum"
            }
          ],
          "groups": [],
          "scatter": {
            "xAxis": {
              "name": "Year",
              "index": 0.0,
              "aggr": "sum"
            }
          }
        },
        "title": true,
        "tableHide": false,
        "editorHide": false
      },
      "settings": {
        "params": {
          "Album Release Country": "USA",
          "Album Release Year": "[2010 TO *]",
          "Album Year": "[2010 TO *]",
          "Artist Country": "France",
          "Artist Style": "Rock"
        },
        "forms": {
          "Album Year": {
            "name": "Album Year",
            "displayName": "Album Year",
            "defaultValue": "[2010 TO *]",
            "hidden": false
          },
          "Artist Country": {
            "name": "Artist Country",
            "displayName": "Artist Country",
            "defaultValue": "",
            "options": [
              {
                "value": "Algeria",
                "displayName": "Algeria"
              },
              {
                "value": "Argentina",
                "displayName": "Argentina"
              },
              {
                "value": "Armenia",
                "displayName": "Armenia"
              },
              {
                "value": "Australia",
                "displayName": "Australia"
              },
              {
                "value": "Austria",
                "displayName": "Austria"
              },
              {
                "value": "Belgium",
                "displayName": "Belgium"
              },
              {
                "value": "Belize",
                "displayName": "Belize"
              },
              {
                "value": "Bermuda",
                "displayName": "Bermuda"
              },
              {
                "value": "Bolivia",
                "displayName": "Bolivia"
              },
              {
                "value": "Bosnia and Herzegovina",
                "displayName": "Bosnia and Herzegovina"
              },
              {
                "value": "Brazil",
                "displayName": "Brazil"
              },
              {
                "value": "Bulgaria",
                "displayName": "Bulgaria"
              },
              {
                "value": "Cameroon",
                "displayName": "Cameroon"
              },
              {
                "value": "Canada",
                "displayName": "Canada"
              },
              {
                "value": "Cape Verde",
                "displayName": "Cape Verde"
              },
              {
                "value": "Chile",
                "displayName": "Chile"
              },
              {
                "value": "China",
                "displayName": "China"
              },
              {
                "value": "Colombia",
                "displayName": "Colombia"
              },
              {
                "value": "Croatia",
                "displayName": "Croatia"
              },
              {
                "value": "Cuba",
                "displayName": "Cuba"
              },
              {
                "value": "Cyprus",
                "displayName": "Cyprus"
              },
              {
                "value": "Czech Republic",
                "displayName": "Czech Republic"
              },
              {
                "value": "Democratic Republic of the Congo",
                "displayName": "Democratic Republic of the Congo"
              },
              {
                "value": "Denmark",
                "displayName": "Denmark"
              },
              {
                "value": "Dominica",
                "displayName": "Dominica"
              },
              {
                "value": "Egypt",
                "displayName": "Egypt"
              },
              {
                "value": "Estonia",
                "displayName": "Estonia"
              },
              {
                "value": "Ethiopia",
                "displayName": "Ethiopia"
              },
              {
                "value": "Faroe Islands",
                "displayName": "Faroe Islands"
              },
              {
                "value": "Finland",
                "displayName": "Finland"
              },
              {
                "value": "France",
                "displayName": "France"
              },
              {
                "value": "Georgia",
                "displayName": "Georgia"
              },
              {
                "value": "Germany",
                "displayName": "Germany"
              },
              {
                "value": "Greece",
                "displayName": "Greece"
              },
              {
                "value": "Guatemala",
                "displayName": "Guatemala"
              },
              {
                "value": "Guyana",
                "displayName": "Guyana"
              },
              {
                "value": "Hong Kong",
                "displayName": "Hong Kong"
              },
              {
                "value": "Hungary",
                "displayName": "Hungary"
              },
              {
                "value": "Iceland",
                "displayName": "Iceland"
              },
              {
                "value": "India",
                "displayName": "India"
              },
              {
                "value": "Ireland",
                "displayName": "Ireland"
              },
              {
                "value": "Israel",
                "displayName": "Israel"
              },
              {
                "value": "Italy",
                "displayName": "Italy"
              },
              {
                "value": "Jamaica",
                "displayName": "Jamaica"
              },
              {
                "value": "Japan",
                "displayName": "Japan"
              },
              {
                "value": "Kenya",
                "displayName": "Kenya"
              },
              {
                "value": "Latvia",
                "displayName": "Latvia"
              },
              {
                "value": "Lebanon",
                "displayName": "Lebanon"
              },
              {
                "value": "Lithuania",
                "displayName": "Lithuania"
              },
              {
                "value": "Luxembourg",
                "displayName": "Luxembourg"
              },
              {
                "value": "Malaysia",
                "displayName": "Malaysia"
              },
              {
                "value": "Mali",
                "displayName": "Mali"
              },
              {
                "value": "Mexico",
                "displayName": "Mexico"
              },
              {
                "value": "Moldova",
                "displayName": "Moldova"
              },
              {
                "value": "Mozambique",
                "displayName": "Mozambique"
              },
              {
                "value": "Nepal",
                "displayName": "Nepal"
              },
              {
                "value": "Netherlands",
                "displayName": "Netherlands"
              },
              {
                "value": "New Zealand",
                "displayName": "New Zealand"
              },
              {
                "value": "Nigeria",
                "displayName": "Nigeria"
              },
              {
                "value": "Norway",
                "displayName": "Norway"
              },
              {
                "value": "Pakistan",
                "displayName": "Pakistan"
              },
              {
                "value": "Peru",
                "displayName": "Peru"
              },
              {
                "value": "Poland",
                "displayName": "Poland"
              },
              {
                "value": "Portugal",
                "displayName": "Portugal"
              },
              {
                "value": "Puerto Rico",
                "displayName": "Puerto Rico"
              },
              {
                "value": "Romania",
                "displayName": "Romania"
              },
              {
                "value": "Russian Federation",
                "displayName": "Russian Federation"
              },
              {
                "value": "Senegal",
                "displayName": "Senegal"
              },
              {
                "value": "Serbia",
                "displayName": "Serbia"
              },
              {
                "value": "Singapore",
                "displayName": "Singapore"
              },
              {
                "value": "Slovakia",
                "displayName": "Slovakia"
              },
              {
                "value": "Slovenia",
                "displayName": "Slovenia"
              },
              {
                "value": "South Africa",
                "displayName": "South Africa"
              },
              {
                "value": "South Korea",
                "displayName": "South Korea"
              },
              {
                "value": "Spain",
                "displayName": "Spain"
              },
              {
                "value": "Sweden",
                "displayName": "Sweden"
              },
              {
                "value": "Switzerland",
                "displayName": "Switzerland"
              },
              {
                "value": "Taiwan",
                "displayName": "Taiwan"
              },
              {
                "value": "Thailand",
                "displayName": "Thailand"
              },
              {
                "value": "Trinidad and Tobago",
                "displayName": "Trinidad and Tobago"
              },
              {
                "value": "Tunisia",
                "displayName": "Tunisia"
              },
              {
                "value": "Turkey",
                "displayName": "Turkey"
              },
              {
                "value": "USA",
                "displayName": "USA"
              },
              {
                "value": "Ukraine",
                "displayName": "Ukraine"
              },
              {
                "value": "United Kingdom",
                "displayName": "United Kingdom"
              },
              {
                "value": "Unknown",
                "displayName": "Unknown"
              },
              {
                "value": "Uruguay",
                "displayName": "Uruguay"
              },
              {
                "value": "Venezuela",
                "displayName": "Venezuela"
              },
              {
                "value": "Virgin Islands",
                "displayName": "Virgin Islands"
              }
            ],
            "hidden": false
          },
          "Artist Style": {
            "name": "Artist Style",
            "displayName": "Artist Style",
            "defaultValue": "",
            "options": [
              {
                "value": "Acoustic",
                "displayName": "Acoustic"
              },
              {
                "value": "African",
                "displayName": "African"
              },
              {
                "value": "Afrobeat",
                "displayName": "Afrobeat"
              },
              {
                "value": "Alternative",
                "displayName": "Alternative"
              },
              {
                "value": "Ambient",
                "displayName": "Ambient"
              },
              {
                "value": "Baroque",
                "displayName": "Baroque"
              },
              {
                "value": "Bass",
                "displayName": "Bass"
              },
              {
                "value": "Beat",
                "displayName": "Beat"
              },
              {
                "value": "Blues",
                "displayName": "Blues"
              },
              {
                "value": "Boca",
                "displayName": "Boca"
              },
              {
                "value": "Bossa",
                "displayName": "Bossa"
              },
              {
                "value": "Cappella",
                "displayName": "Cappella"
              },
              {
                "value": "Celtique",
                "displayName": "Celtique"
              },
              {
                "value": "Chamber",
                "displayName": "Chamber"
              },
              {
                "value": "Chillout",
                "displayName": "Chillout"
              },
              {
                "value": "Chip",
                "displayName": "Chip"
              },
              {
                "value": "Classic",
                "displayName": "Classic"
              },
              {
                "value": "Comedy",
                "displayName": "Comedy"
              },
              {
                "value": "Contemporary",
                "displayName": "Contemporary"
              },
              {
                "value": "Country",
                "displayName": "Country"
              },
              {
                "value": "Crossover",
                "displayName": "Crossover"
              },
              {
                "value": "Dance",
                "displayName": "Dance"
              },
              {
                "value": "Disco",
                "displayName": "Disco"
              },
              {
                "value": "Downtempo",
                "displayName": "Downtempo"
              },
              {
                "value": "Drum",
                "displayName": "Drum"
              },
              {
                "value": "Easy listening",
                "displayName": "Easy listening"
              },
              {
                "value": "Electro",
                "displayName": "Electro"
              },
              {
                "value": "Ethereal",
                "displayName": "Ethereal"
              },
              {
                "value": "Ethnic",
                "displayName": "Ethnic"
              },
              {
                "value": "Experimental",
                "displayName": "Experimental"
              },
              {
                "value": "Flamenco",
                "displayName": "Flamenco"
              },
              {
                "value": "Folk",
                "displayName": "Folk"
              },
              {
                "value": "Funk",
                "displayName": "Funk"
              },
              {
                "value": "Fusion",
                "displayName": "Fusion"
              },
              {
                "value": "Gangsta",
                "displayName": "Gangsta"
              },
              {
                "value": "Garage",
                "displayName": "Garage"
              },
              {
                "value": "Glam",
                "displayName": "Glam"
              },
              {
                "value": "Gospel",
                "displayName": "Gospel"
              },
              {
                "value": "Gothic",
                "displayName": "Gothic"
              },
              {
                "value": "Hip hop",
                "displayName": "Hip hop"
              },
              {
                "value": "House",
                "displayName": "House"
              },
              {
                "value": "Indie",
                "displayName": "Indie"
              },
              {
                "value": "Industrial",
                "displayName": "Industrial"
              },
              {
                "value": "Instrumental",
                "displayName": "Instrumental"
              },
              {
                "value": "J-pop",
                "displayName": "J-pop"
              },
              {
                "value": "Jam",
                "displayName": "Jam"
              },
              {
                "value": "Jazz",
                "displayName": "Jazz"
              },
              {
                "value": "Medieval",
                "displayName": "Medieval"
              },
              {
                "value": "Melodic",
                "displayName": "Melodic"
              },
              {
                "value": "Metal",
                "displayName": "Metal"
              },
              {
                "value": "Opera",
                "displayName": "Opera"
              },
              {
                "value": "Orchestral",
                "displayName": "Orchestral"
              },
              {
                "value": "Pop",
                "displayName": "Pop"
              },
              {
                "value": "Progressive",
                "displayName": "Progressive"
              },
              {
                "value": "Psychedelic",
                "displayName": "Psychedelic"
              },
              {
                "value": "Punk",
                "displayName": "Punk"
              },
              {
                "value": "Rap",
                "displayName": "Rap"
              },
              {
                "value": "Reggae",
                "displayName": "Reggae"
              },
              {
                "value": "Rhythm",
                "displayName": "Rhythm"
              },
              {
                "value": "Rnb",
                "displayName": "Rnb"
              },
              {
                "value": "Rock",
                "displayName": "Rock"
              },
              {
                "value": "Romantic",
                "displayName": "Romantic"
              },
              {
                "value": "Samba",
                "displayName": "Samba"
              },
              {
                "value": "Ska",
                "displayName": "Ska"
              },
              {
                "value": "Soft",
                "displayName": "Soft"
              },
              {
                "value": "Soprano",
                "displayName": "Soprano"
              },
              {
                "value": "Soul",
                "displayName": "Soul"
              },
              {
                "value": "Swing",
                "displayName": "Swing"
              },
              {
                "value": "Symphonic",
                "displayName": "Symphonic"
              },
              {
                "value": "Synth",
                "displayName": "Synth"
              },
              {
                "value": "Tango",
                "displayName": "Tango"
              },
              {
                "value": "Techno",
                "displayName": "Techno"
              },
              {
                "value": "Trance",
                "displayName": "Trance"
              },
              {
                "value": "Underground",
                "displayName": "Underground"
              },
              {
                "value": "Unknown",
                "displayName": "Unknown"
              },
              {
                "value": "Unplugged",
                "displayName": "Unplugged"
              },
              {
                "value": "Uplifting",
                "displayName": "Uplifting"
              },
              {
                "value": "Urban",
                "displayName": "Urban"
              },
              {
                "value": "Vocal",
                "displayName": "Vocal"
              },
              {
                "value": "World",
                "displayName": "World"
              }
            ],
            "hidden": false
          }
        }
      },
      "jobName": "paragraph_1432137037555_-826772635",
      "id": "20150520-175037_1545340445",
      "result": {
        "code": "SUCCESS",
        "type": "TABLE",
        "msg": "Year\n"
      },
      "dateCreated": "May 20, 2015 5:50:37 PM",
      "dateStarted": "Jun 2, 2015 10:09:57 PM",
      "dateFinished": "Jun 2, 2015 10:10:00 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "title": "Expand me!",
      "text": "%md\n\nThis Spark/Cassandra/Solr combo is so ...\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\n\n![Mind Blowing!](http://www.reactiongifs.com/r/2013/10/tim-and-eric-mind-blown.gif \"Mind Blowing\")",
      "config": {
        "colWidth": 12.0,
        "graph": {
          "mode": "table",
          "height": 300.0,
          "optionOpen": false,
          "keys": [],
          "values": [],
          "groups": [],
          "scatter": {}
        },
        "editorHide": true,
        "tableHide": true,
        "title": true
      },
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1432137020882_1490169917",
      "id": "20150520-175020_1051483185",
      "result": {
        "code": "SUCCESS",
        "type": "HTML",
        "msg": "\u003ch1\u003eThis Spark/Cassandra/Solr combo is so \u0026hellip;\u003c/h1\u003e\n\u003cp\u003e\u003cimg src\u003d\"http://www.reactiongifs.com/r/2013/10/tim-and-eric-mind-blown.gif\" alt\u003d\"Mind Blowing!\" title\u003d\"Mind Blowing\" /\u003e\u003c/p\u003e\n"
      },
      "dateCreated": "May 20, 2015 5:50:20 PM",
      "dateStarted": "Jun 2, 2015 10:10:14 PM",
      "dateFinished": "Jun 2, 2015 10:10:15 PM",
      "status": "FINISHED",
      "progressUpdateIntervalMs": 500
    },
    {
      "config": {},
      "settings": {
        "params": {},
        "forms": {}
      },
      "jobName": "paragraph_1432140672315_-1191708350",
      "id": "20150520-185112_1247005157",
      "dateCreated": "May 20, 2015 6:51:12 PM",
      "status": "READY",
      "progressUpdateIntervalMs": 500
    }
  ],
  "name": "08-SearchAnalytics Mode",
  "id": "2ANGJVNH2",
  "angularObjects": {},
  "config": {
    "looknfeel": "default"
  },
  "info": {}
}